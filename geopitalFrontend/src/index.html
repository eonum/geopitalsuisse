<!--<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>GeopitalFrontend</title>
  <base href="/">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>-->


<!DOCTYPE html>
<html>
<head>

  <title>Quick Start - Leaflet</title>

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="shortcut icon" type="image/x-icon" href="docs/images/favicon.ico" />

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ==" crossorigin=""/>



</head>
<body>



<div id="mapid" style="width: 100%; height: 100%; position: absolute;"></div->


<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.13.0/d3.min.js"></script>
<script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>


<script>

  var map = L.map('mapid').setView([46.818188, 8.227512], 8);

  L.tileLayer('https://api.mapbox.com/styles/v1/nathi/cjf8cggx93p3u2qrqrgwoh5nh/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoibmF0aGkiLCJhIjoiY2pmOGJ4ZXJmMXMyZDJ4bzRoYWRxbzhteCJ9.x2dbGjsVZTA9HLw6VWaQow', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
    '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
    'Imagery Â© <a href="http://mapbox.com">Mapbox</a>',
    id: 'mapbox.streets'
  }).addTo(map);

  var testData = [
    {x: 7.425471000000016, y: 46.947142},
    {x: 8.547388899999987, y: 47.3795461},
    {x: 9.388304000000062, y: 47.429348},
    {x: 8.295154400000001, y: 47.05875549999999},
    {x: 7.58587, y: 47.561557},
    {x: 8.059350999999992, y: 47.388479},
    {x: 8.953260999999998, y: 46.0176793},


  ]

  var svg = d3.select(map.getPanes().overlayPane).append("svg");

  calculateSVGBounds(testData);


  svg.selectAll('circle')
    .data(testData)
    .enter()
    .append('circle')
    .attr("r", 6)
    .attr('fill','#d633ff')
    .attr("cx", function(d) {return projectPoint(d.x, d.y).x})
    .attr("cy", function(d) {return projectPoint(d.x, d.y).y})


  // calculates x and y coordinate in pixels for given coordinates (wgs84)
  function projectPoint(x, y) {
    var point = map.latLngToLayerPoint(new L.LatLng(y, x));
    return point;
  }

  // we have to calculate the width and the height of the svg element.
  // calculate the y max and x max value for all datapoints and add a padding. xmax is width and ymax is height of svg
  function calculateSVGBounds(data) {
    var xMin = 1000000;
    var xMax = 0;
    var yMin = 1000000;
    var yMax = 0;
    var padding = 50;
    data.forEach(function(d) {
      xMax = Math.max(projectPoint(d.x, d.y).x, xMax);
      yMax = Math.max(projectPoint(d.x, d.y).y, yMax);
    });
    svg
      .style("left", 0)
      .style("width", xMax + padding)
      .style("top", 0)
      .style("height", yMax + padding);
  }


/*  map.on("viewreset", update);
  update();

  function update() {
    feature.attr("transform",
      function(d) {
        return "translate("+
          map.projectPoint(d.x, d.y).x, xMax);
          map.projectPoint(d.x, d.y).y, yMax)
      }
    )
  }*/

  var zoom = d3.behavior.zoom()
    .scaleExtent([1, 10])
    .on("zoom", zoomed);

  function zoomed() {
    container.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
  }

  map.on('zoomed', function() {
    calculateSVGBounds(testData);
    // D3 UPDATE HERE.
    //container.attr("transform", "translate(" + d3.event.translate + ")scale(" + d3.event.scale + ")");
    alert('points should be updated');
  });

/*  var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.right + ")")
    .call(zoom);*/

</script>



</body>
</html>

